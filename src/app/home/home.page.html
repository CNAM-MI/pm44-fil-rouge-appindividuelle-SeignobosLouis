<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Accueil
    </ion-title>
    <ion-buttons slot="end">
    <ion-button>
      <ion-avatar>
        <img src="../../assets/images/bluddy.png" alt="User avatar" />
      </ion-avatar>
    </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Accueil</ion-title>
    </ion-toolbar>
  </ion-header>

  <ng-container *ngTemplateOutlet="hasData ? hasDataTemplate : noDataTemplate"></ng-container>
  <ng-template #hasDataTemplate>
    <div class="center-container">
      <ion-text class="upper-text">Sondages</ion-text>
      <ion-card *ngFor="let sondage of sondagesList">
        <img style="width: 50%;" alt="Background survey image" src="../../assets/images/drive_baby.jpg" />
        <ion-card-header>
          <ion-card-title>{{sondage.title}}</ion-card-title>
          <div class="flex-container">
            <ion-avatar slot="start">
              <img src="../../assets/images/bluddy.png" alt="Creator Profile Picture">
            </ion-avatar>
            <ion-card-subtitle>Soumis par {{sondage.pseudo}} le {{ creationDateAdapter(sondage.createdAt) | date: 'short' }}</ion-card-subtitle>
          </div>
          <ion-card-subtitle>Délai fixé de {{ sondage.day_vote_time }} minutes pour voter le jour</ion-card-subtitle>
          <ion-card-subtitle>Délai fixé de {{ sondage.hour_vote_time }} minutes pour voter le jour</ion-card-subtitle>

        </ion-card-header>

        <ion-card-content>
          <p> Description : {{sondage.description}}</p>
          <ion-button expand="full" fill="solid" color="primary">
            <ion-icon slot="start" name="beer-outline"></ion-icon>
            <ion-text (click)="goToVote()">Voter</ion-text>
          </ion-button>
        </ion-card-content>
      </ion-card>
    </div>

  </ng-template>

  <ng-template #noDataTemplate>
    <div class="center-container">
      <ion-text class="upper-text">{{sondagesList}}</ion-text>

      <ion-text class="upper-text">C'est un peu calme ici ^^</ion-text>
      <ion-button expand="full" fill="solid" color="primary" (click)="goToSurvey()">
        <ion-icon slot="start" name="beer-outline"></ion-icon>
        <ion-text>Créer un sondage</ion-text>
      </ion-button>
    </div>
  </ng-template>

</ion-content>